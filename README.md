[![MIT](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/lixinliang/music.163.com/blob/master/LICENSE)
[![GitHub](https://img.shields.io/github/release/lixinliang/music.163.com.svg)](https://github.com/lixinliang/music.163.com/releases)
[![Twitter](https://img.shields.io/badge/twitter-@qq393464140-blue.svg)](http://twitter.com/qq393464140)

# music.163.com
> ğŸµç½‘æ˜“äº‘éŸ³ä¹ web shortcut

* å› ä¸ºæˆ‘æ‡’ï¼Œæ‡’å¾—å®‰è£…ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯ï¼Œæˆ‘å°±ç”¨webç‰ˆï¼ğŸŒš
* å› ä¸ºæˆ‘æ‡’ï¼Œæ‡’å¾—å®‰è£…Chrome-extensionã€‚ğŸŒšï¼ˆä¾‹å¦‚è¿™ä¸ªï¼Œ[https://github.com/kikyous/music.163.com](https://github.com/kikyous/music.163.com)ï¼‰
* å› ä¸ºæˆ‘æ‡’ï¼Œæ‡’å¾—å®‰è£…CLIã€‚ğŸŒšï¼ˆä¾‹å¦‚è¿™ä¸ªï¼Œ[https://github.com/l04m33/music163](https://github.com/l04m33/music163)ï¼‰

## Shortcut

| Key | Description |
|---|---|
| `Space` | play/pause |
| `â†` | prev |
| `â†’` | next |
| `â†‘` | increase volume |
| `â†“` | decrease volume |
| `â†µ` | display/hide playlist |
| `Tab` | focus/blur search input |

## Preview

![preview](./src/music.gif)

## Usage

###### 1. æ‰“å¼€Chromeï¼Œ`cmd + D`ï¼ˆæ·»åŠ ä¹¦ç­¾ï¼‰ï¼Œç‚¹å‡»ä¿®æ”¹ï¼Œåå­—éšæ„ï¼Œç½‘å€æ‹·è´ä»¥ä¸‹ä»£ç ï¼ˆæˆ–è€…[`dist.js`](https://raw.githubusercontent.com/lixinliang/music.163.com/master/dist.js)çš„å†…å®¹ï¼‰ã€‚

```js
javascript:!function(){"use strict";function t(){function t(){[e,r.contentWindow.document].forEach(function(t,e){var i=t.body;void 0===i.dataset.shortcut&&(i.dataset.shortcut="",e&&function(){t.head.appendChild(a());var e=function(){var t=f.init();t.dataset.bubble="",i.appendChild(t),t.width=parseInt(getComputedStyle(t).width),t.height=parseInt(getComputedStyle(t).height)};f.stage?e():(e(),function t(){"pause"==l.dataset.action?(setTimeout(t,1400*(1-v.value())+600),f.animate()):setTimeout(t,100)}())}(),t[n]("keydown",o,!1))})}function o(t){if(!t.target.matches("input,textarea")){if(32==t.keyCode)return l.click(),t.preventDefault(),!1;if(37==t.keyCode)return A.click(),t.preventDefault(),!1;if(39==t.keyCode)return u.click(),t.preventDefault(),!1;if(38==t.keyCode){var e=v.value();return e+=.1,e=e>1?1:e,v.value(e),t.preventDefault(),!1}if(40==t.keyCode){var n=v.value();return n-=.1,n=n<0?0:n,v.value(n),t.preventDefault(),!1}if(13==t.keyCode)return c.click(),t.preventDefault(),!1;if(9==t.keyCode){var i=this.querySelector("input")||d;return i==document.activeElement?i.blur():i.focus(),t.preventDefault(),!1}}}var r=i("iframe"),A=i('[data-action="prev"]'),u=i('[data-action="next"]'),c=i('[data-action="panel"]'),l=i('[data-action="play"],[data-action="pause"]'),d=i("input");e.head.appendChild(a()),v.init(i('[data-action="volume"]')),t(),r[n]("load",t,!1)}var e=document,n="addEventListener",i=document.querySelector.bind(e),o=new Image;o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE0UlEQVR4Xu2bi1EUQRCGuyNQIxAiUCIQIlAjUCIQI1AjECIQIxAiECIQIxAiECJo66d6x9ndefTMzu3t1d1UXVHFLbvd3/R7FqYtX7zl+tMOwM4C1kBARF7pY5/qz3siemDmm7nFWakLiAgUfE1Eh/rZMyp4S0RX+rlkZgBayWoOQESg5DsiekNELxtJDcu4IKLvzAw4zVYzACKCXf6gijcTMHCjcwUBC5m8JgNQxT+piU8WqOAGAPCFmSeBqAag/v1jDYoPGQHA29o4UQVAdx3Kd1G8YONWcimC5FFNFikGICIw988T1LgjIgSy7oNbASQCJn6+mHDvE2Y+K/l7M4AJJv+biBC4LqwRXJ+FLPKeiLqawaoXssWx1SVKAPwqSGvYZQhyalU6pp2m1ROF8cRI4ZyZjy3XmgCIyDcVIHfPByKCGWLHmy8RAQi4nwWECUIWQIHyl4BkNb1aOmoRAGxxjY/MfJp6VhKAiIA2gl5qYdehOEx+tqXW8NXwQKTIqGxRAEr6T+YBCHCHq971RHxA5kAdkHIJpMj9mIwpAD8zRQ52fm9dyndQRMQCAT0EMspoBQGICFIQCp3YgvLY+dnb15BAWphhw1ILhdKobB4B0ByMlJdqXZN+ZfDL5peICHYY2Sq2bpj5YPhlCABSTSq4ZCNrc+2MNzQEbRRIvRQdApAqeO6Y2TrUMIrd9jIRQYn9PHLXK2Y+8r/rATBE/hHBtuJPv5vBCpAR3FBlCCCV9xe/+8CnMQwKxlJjz4WHAJD3Yya++N33UmNqI2+Zeb+71gHQfAr/Dy1MbJfS+2f9RK3gb+LCgy6F+wAw04vl0mtmxvcbs0QENUpstuBqAh9AKo+eMTPS48YsEUH9j5F8aDl39gGk/AbDxylToNnBZbKB08cHgLYRY+3QCpaRs2tV8MBMZegs2geAOjnWY7ugUSDDWi/N9AcupvkAUj5jtoDAxDhYg+foBHqSoslvBgCO29Dw/T8ez/hMCYBRLGHm7ORpCCSigDkWZQAEY0AqCCYBaAmNiItaAdmkV0w1BIAKD80MrAG7GD0nrAmCqTQY7AC1eELgDA4bXLXVzgKGhgIY2M0RiAwA185bCyHnM50EGmXRNmcrxIYWEAodsAYo1Bt2iEgqqAcLIYyWYqXwPTM/85TPTYx6gq4YQPesnpuKiCQCresIh81QqpdGJYjyEoceAJXd+RlcwNfxcfip5S/K9ljh1utqhwBSxVAuc0W/n8kCrPL1yvohgCLTtj5xYQB6rhIaicGULEdPVv1pQQBGbX0IQKoiNCvtX7ggAKNsFgLQ3A0WBGA0zo8djMAKUM1NeVnBGcECAOAID6Owx/q/Z505m9aaGjDwwQ2KocwMAMpiA5HS0YglT69qmpTiIDkjgOLJdQ2A4lphRgDmbtEVaTkXCLSpcAWYlTlVzgSg6rS62AIAxHgkPWcQrD6trgJQCmHFFlCtfG8iVOoKCgENEZokfKIusSIAUBzxCG+iVb9NXm0BgdiADgzxYfRuX0MA15riEIOQ4qoVrw6COUsJTWIaAiiO8jl5m1lA9yDvNbbuVximjCqwnGDqYiho/LkD3kZb5v8LWBRa4jXNLWCJSqZk2gHYtB1rLe/OAloT3bT77Sxg03astbxbbwH/AMaqLl/zAfZ3AAAAAElFTkSuQmCC";var r=e.createElement("div");r.innerHTML="<style>"+'body[data-shortcut]::after {\n  content: "";\n  position: fixed;\n  right: 16px;\n  bottom: 18px;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background: #c70c0c url(IMAGE) center no-repeat;\n  background-size: 30px 30px;\n  z-index: 9999;\n  box-shadow: 0 0 20px 5px rgba(199, 12, 12, 0.3); }\n\nbody[data-shortcut] > canvas[data-bubble] {\n  position: fixed;\n  right: 0;\n  bottom: 60px;\n  width: 82px;\n  height: 350px;\n  z-index: 999; }\n\nbody[data-shortcut] .m-vol {\n  opacity: 0;\n  pointer-events: none;\n  visibility: visible !important; }\n  body[data-shortcut] .m-vol.is-active {\n    opacity: 1;\n    pointer-events: auto; }\n'.replace("IMAGE",o.src)+"</style>";var a=function(){return r.firstElementChild.cloneNode(!0)},A=new Image;A.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADbElEQVR4Xu2b/XHUMBDF91VAqABSQUgFQAXQAaGChAqACggVkFRAUgFJBSQdhAogFSzzGGnGCXfatWRbss+aub9OtrU/v/3QhyE73rDj9ssKYFVAJQKqeiQiX0RkrzOEOxG5Cb8rEbkF8GfMIVZxAVV9JSI/nIZdiMgFgHNn/17dagH4JCIfe41UhEo4FZGvQ6piTgAiL4I4GUoRcwQQQTBGfADAmJHd5gyARlMNr0sgzB1AfPPvAZzlyGApAGh7FoRaAFgDfMt5Y8Y1dAfGBnerBaBPHeA2JsSEQwAsqFxtaQBo9A2AQ5f1InUmQz0rQa8t3X6fAbDYMtsSFRDT476nYlwqAEI4B8Bgm2y1ALwQkZ/W4Ab4/6mlgioAaJiq6gAGWrdgqcwJ1Na2dABmRmgZwGWY/nLBhHUD/fmJ9co3/M9guLUuaBnAg1SmqgTxVkSY3p71AJEskWcDIBocQJxwTcCpiGRNMDsAHRDPg4u8MdRwDYAutLHVBMBJy8vE4F3VXKgqORXe5hbJQDh7ACGlMj4wNhxvAHoPoLvy/KDLIgB03IJSf6yGZEW4KAAdNTBAEgbd7DRVDbYM4BIA096orWUAyeg9FJWaAFijbwpa0bbFK8DaHXKlwVIl1FTACsDYH1wV4F3XK3GDwVwgTFIOQv7t1t5c/Yn7d9zKYm6+DjO71A5x+woIRnMywnw9dM5uF4CqcibGt0ejt9bZJdIUkTYBqCoNd625LwpAkDuPtdCnp2jtKKCC8QTcFACu4U/15qO6eu/05sjSTIOqalVsOc/1XNMMgN8jRvoUiPoAwmHGMQ4yzEMBqmpNWT2G5PZpQgHWym2ucZ7reNKj6Aic5yHJIKiq1QAAMAO0x0CrT6sAeEh6krRrAeAS8zuL4gj/8zwwV3ZHbxYATna+jz6K/x+Q3NEdcjymn6kq5/A529K543Qdbcm9+ePrPAAoRX7YMEW7Z8nd55xf6aBMAHzAhNkg67hrCQQvAC568JTFmK4wufEE5wIQVMC0xKzAdb8hG2V/BICfxkze3AACBCqBEKxDCR5DaDhL7eTmpedGJX16AYgPCocSeGiJabKvW9wGiGfWGb4Sw7zXZgHo3jzA4DJ4XAqnqxDKrxA32J0l9b/P4aaM8B4IxQA8D2m5zwqg5bczxdh2XgF/Ad4VV1C2L+RTAAAAAElFTkSuQmCC";var u=new Image;u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACyElEQVR4Xu1b7XHUMBB9WwEpASqADkgJ6YCUQAlJBaSEpALoAOgAOggVkFSwzLuRbpSLfPjst/bJI81k7B/23u7br2dpY9j4cvePAD4AuExXWnxvZre8sS3Z7+4XAEqDafTQujWzm6YBcHd6tjT47QkOfTSzd80AkLz7PoUyPXvMu6NwMK5RT67wUPJuNpie5p90nRUAqVhlz9JY5nPoWg0Ad2eu1qpzqMGHwhcDoPBubkfh3h2DZAgAybtl7s4uVmOMmfKMFAB3vwLwBcAprWiK3rJ3ZAC4++dkvEy5JQQpAfi7RNVWg6IEwNXKLSGvA6Bigu7eI2CJkFX/Rk+BngKir8EzrwG/AZCZvlpbTIFnAD8A/OLVzHiPIQdtAYCf2Vhezeyx5umtAPCn8C6N3Xl3zGoVAHq3DOenMca2GgEsVLu8TaHMe9k6twh4UaiSwZO9OwaltQGgd8tQrhaqMYZMfWY1AFREa6rh+b0OwMDHWjgP6BEgoto9BWYi0GtArwH1HateBFVV+liOzUxfyeu9BvQa0GtAddu+F8FeBEVUtXeBI1VW0sdmCultcIttsBiS5AgOp1IOx+i4C8XdJ+4v3q1yMKIqsqXy7v4JwI1iFKepNpgmRb8qJkQzoM0AkIz/rp4WbQmAewAMfelqCYCQIayWAODByRup+4FnM7uQTItHM0F3j0iBBzO7bgUAzhazr1cHHSZEBk+rLs3saRAAFdGYoFz1ldQJvqUp8zlieep8ReMp5BUAaqIxR9OBo+5rABzNPTUa6PU7M2M67dcegCiioQagOO/Lo/eZCh8CQoNJhZk6HJepHrnvAIgkGlEAqORmACKqLCK+BVSG7+lwioAwoqFWWC0vR0AY0VArrJYXmQI7oqFWWC2vLIIhREOtsFreYRuUEw21wmp5NSIkJRpqhdXy/keF839ycs9tEtFQK6yW9w9Izs9QVmtY/gAAAABJRU5ErkJggg==";var c="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,o){"object"==n(e)?t.exports=o():i.BubbleHearts=o()}(c,function(){function t(t,n,i){var o=e.uniformDiscrete(89,91)/100,r=1-o,a=(e.uniformDiscrete(45,60)+e.uniformDiscrete(45,60))/100,A=function(t){return t>o?Math.max(((1-t)/r).toFixed(2),.1)*a:a},u=e.uniformDiscrete(-30,30),c=function(t){return u},l=n.width/2+e.uniformDiscrete(-10,10),d=(n.width-Math.sqrt(Math.pow(t.width,2)+Math.pow(t.height,2)))/2-10,s=e.uniformDiscrete(.8*d,d)*(e.uniformDiscrete(0,1)?1:-1),f=e.uniformDiscrete(250,400),g=function(t){return t>o?l:l+s*Math.sin(f*(o-t)*Math.PI/180)},h=function(e){return t.height/2+(n.height-t.height/2)*e},m=e.uniformDiscrete(14,18)/100,p=function(t){return t>m?1:1-((m-t)/m).toFixed(2)};return function(e){if(!(e>=0))return!0;i.save();var n=A(e),o=c(),r=g(e),a=h(e);i.translate(r,a),i.scale(n,n),i.rotate(o*Math.PI/180),i.globalAlpha=p(e),i.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),i.restore()}}var e=function(t){var e=t,n=Math.floor,i=Math.random;return t.uniform=function(t,e){return t+(e-t)*i()},t.uniformDiscrete=function(t,i){return t+n((i-t+1)*e.uniform(0,1))},t}({}),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)};return function(){function r(){n(this,r);var t=this.canvas=document.createElement("canvas"),e=this.context=t.getContext("2d"),i=this._children=[];o(function n(){o(n),e.clearRect(0,0,t.width,t.height);for(var r=0,a=i.length;r<a;){var A=i[r];A.render.call(null,(A.timestamp+A.duration-new Date)/A.duration)?(i.splice(r,1),a--):r++}})}return i(r,[{key:"bubble",value:function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.uniformDiscrete(2400,3600),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t(n,this.canvas,this.context);return this._children.push({render:o,duration:i,timestamp:+new Date}),this}}]),r}()})}),d=[];A.onload=u.onload=function(){d.push(this)};var s={uniform:function(t,e){return t+(e-t)*Math.random()},uniformDiscrete:function(t,e){return t+Math.floor((e-t+1)*s.uniform(0,1))}},f={init:function(){return this.stage=new l,this.stage.canvas},animate:function(){if(d.length){var t=d[s.uniformDiscrete(0,d.length-1)],e=document.createElement("canvas"),n=e.getContext("2d");e.width=t.width/2,e.height=t.height/2,n.drawImage(t,0,0,t.width/2,t.height/2),n.globalCompositeOperation="source-in",n.fillStyle="#"+245..toString(16)+77..toString(16)+77..toString(16),n.fillRect(0,0,e.width,e.height),this.stage.bubble(e)}}},g=new Function(`\n    for (let [key, value] of Array.from(window)) {\n        if (Object.prototype.toString.call(value) == '[object Object]') {\n            for (let [method, foo] of value) {\n                if (typeof foo == 'function' && foo.length == 1) {\n                    let content = foo.toString();\n                    if (content.indexOf('volume=') > -1 && content.indexOf('setVolume') > -1) {\n                        return [key, method];\n                    }\n                }\n            }\n        }\n    };\n`),h=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,A=t[Symbol.iterator]();!(i=(a=A.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&A.return&&A.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=0,p=!1,v={init:function(t){var o=i(".m-vol"),r=i(".m-vol .vbg"),a=i(".m-vol .btn"),A=i(".m-vol .curr"),u=o.classList;setTimeout(function(){o.style.transition="opacity 200ms linear"},0),t[n]("click",function(){clearTimeout(m),(p=!p)?u.add("is-active"):u.remove("is-active")},!1),t[n]("blur",function(){clearTimeout(m),p=!1,u.remove("is-active")},!1);var c=g(),l=h(c,2),d=l[0],s=l[1],f=window[d][s],v=function(){};window[d][s]=function(){console.log("HACK succesfully!"),v=f.bind(this),window[d][s]=f},r.dispatchEvent(new Event("mousedown")),e.dispatchEvent(new Event("mouseup")),this.value=function(t){if(!arguments.length){var e=parseFloat(A.style.height),n=parseFloat(a.style.top);return parseFloat((e/(e+n/81*93)).toFixed(2))}console.log("[Volume]:"+t),clearTimeout(m),p||(p=!0,u.add("is-active")),m=setTimeout(function(){p=!1,u.remove("is-active")},2e3),v(t),A.style.height=93*t+"px",a.style.top=81*(1-t)+"px"}}},w=e.readyState;"complete"==w||"interactive"==w?setTimeout(t,0):e[n]("DOMContentLoaded",t,!1)}();
```

æˆ–è€…

```js
javascript:!function(){var t=document.createElement("script");t.charset="utf-8",t.src="https://raw.githubusercontent.com/lixinliang/music.163.com/master/dist.js",document.head.appendChild(t)}();
```

###### 2. æ‰“å¼€ http://music.163.com ï¼Œç‚¹å‡»ä½ åˆ›å»ºçš„ä¹¦ç­¾ï¼ˆæ‰§è¡Œä»£ç ï¼‰ã€‚

* æ¯æ¬¡æ‰“å¼€éƒ½è¦ç‚¹ä¸€æ¬¡ä¹¦ç­¾ã€‚

## Custom

* æºç åœ¨`src.js`ï¼Œå¯è‡ªè¡Œè®¢åˆ¶ã€‚
* ä½¿ç”¨`$ npm run build`æ¥æ„å»ºä»£ç ã€‚

## License

MIT
